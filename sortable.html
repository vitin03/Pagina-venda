<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CASA NOVA LOCADORA</title>
    <script type="text/javascript" src="../js/jquery-3.6.1.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../public/styles/style.css">
</head>

<body class="">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <style>
        .listaInfoFotoOrdenar {
            background-color: #0c69b05e;
            border-bottom-right-radius: 15px;
            display: flex;
            align-items: center;
        }


        .listaInfoFotoOrdenar .iconeInfo {
            padding: 2px 2px;
            cursor: default;
            color: #787878a4 !important;
        }

        .listaInfoFotoOrdenar .iconeInternet {
            color: #0b5ed7 !important;
        }

        .listaInfoFotoOrdenar .iconeFinalidadeVenda {
            color: #157347 !important;
        }

        .listaInfoFotoOrdenar .iconeFinalidadeAluguel {
            color: rgb(232, 179, 20) !important;
        }

        .listaInfoFotoOrdenar .iconeCapa {
            color: #bb2d2b !important;
        }
    </style>
    <section>
        <div class="container">
            <div class="d-flex justify-content-between align-items-center my-1">
                <div>
                    <h3 class="m-0">Fotos do Imóvel</h3>
                </div>
                <div class="d-flex">
                    <button class="btn btn-primary alterarFotoApp d-flex align-items-center justify-content-center me-1"
                        type="button" data-num_foto="0" data-cod_imov="99766" data-descricao="" data-capa="N"
                        data-exibe_internet="S">
                        <span class="material-icons me-1">add</span>
                        Incluir foto
                    </button>
                    <button class="btn btn-success ordenarFotosApp d-flex align-items-center justify-content-center"
                        type="button">
                        <span class="material-icons me-1">toc</span>
                        Ordenar fotos
                    </button>
                </div>
            </div>
            <div class="descricao mb-3">
                <p class="m-0">Nessa página estão todas as ajudas e dicas de documentação do sistema</p>
            </div>
            <div class="row ui-sortable border rounded" style="padding: 10px 6px;" id="sort1">
                <div class="col-md-3 draggable alterarFotoApp ui-sortable-handle px-1" data-num_foto="1560879"
                    data-cod_imov="99766" data-descricao="Dormitório suite" data-capa="N" data-exibe_internet="S">
                    <div class="w-100 position-relative">
                        <img class="w-100" src="https://www.casanovalocadora.com.br/Imovel/imagem/1560879/1024/768/100">
                        <div class="position-absolute top-0 p-1 listaInfoFotoOrdenar">
                            <div class="iconeInfo iconeInternet d-flex align-items-center text-primary"
                                title="Esta foto será exibida na internet">
                                <span class="material-icons">language</span>
                            </div>
                            <div class="iconeInfo iconeCapa d-flex align-items-center"
                                title="Esta foto será a capa do imóvel">
                                <span class="material-icons">book</span>
                            </div>
                            <div class="iconeInfo iconeFinalidadeVenda d-flex align-items-center"
                                title="Esta foto será exibida quando o imóvel estiver para venda">
                                <span class="material-icons">real_estate_agent</span>
                            </div>
                            <div class="iconeInfo iconeFinalidadeAluguel d-flex align-items-center"
                                title="Esta foto será exibida quando o imóvel estiver para aluguel">
                                <span class="material-icons">sell</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-1">
                        <input class="form-control" type="text" name="descricao[]" readonly="" value="Dormitório suite">
                    </div>
                </div>
                <div class="col-md-3 draggable alterarFotoApp ui-sortable-handle px-1" data-num_foto="1560879"
                    data-cod_imov="99766" data-descricao="Dormitório suite" data-capa="N" data-exibe_internet="S">
                    <div class="w-100 position-relative">
                        <img class="w-100" src="https://www.casanovalocadora.com.br/Imovel/imagem/1560879/1024/768/100">
                        <div class="position-absolute top-0 p-1 listaInfoFotoOrdenar">
                            <div class="iconeInfo iconeInternet d-flex align-items-center text-primary"
                                title="Esta foto será exibida na internet">
                                <span class="material-icons">language</span>
                            </div>
                            <div class="iconeInfo iconeCapa d-flex align-items-center"
                                title="Esta foto será a capa do imóvel">
                                <span class="material-icons">book</span>
                            </div>
                            <div class="iconeInfo iconeFinalidadeVenda d-flex align-items-center"
                                title="Esta foto será exibida quando o imóvel estiver para venda">
                                <span class="material-icons">real_estate_agent</span>
                            </div>
                            <div class="iconeInfo iconeFinalidadeAluguel d-flex align-items-center"
                                title="Esta foto será exibida quando o imóvel estiver para aluguel">
                                <span class="material-icons">sell</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-1">
                        <input class="form-control" type="text" name="descricao[]" readonly="" value="Dormitório suite">
                    </div>
                </div>
            </div>
        </div>
    </section>
    <datalist id="descricao">
        <option value="Acesso segundo pavimento"></option>
        <option value="Ante sala"></option>
        <option value="Armário quarto"></option>
        <option value="Área de Acesso"></option>
        <option value="Área de Circulação"></option>
        <option value="Área de Circulação Interna"></option>
        <option value="Área de Claridade"></option>
        <option value="Área de Serviço"></option>
        <option value="Área Gourmet"></option>
        <option value="Área de Lazer"></option>
        <option value="Banho Social"></option>
        <option value="Banho Social 01"></option>
        <option value="Banho Social 02"></option>
        <option value="Banho Social 03"></option>
        <option value="Banho Suíte"></option>
        <option value="Barracão"></option>
        <option value="Cobertura"></option>
        <option value="Cômodo Independente"></option>
        <option value="Copa"></option>
        <option value="Copa com sala"></option>
        <option value="Cozinha"></option>
        <option value="Despensa"></option>
        <option value="Dormitório 01"></option>
        <option value="Dormitório 02"></option>
        <option value="Dormitório 02"></option>
        <option value="Escada de acesso"></option>
        <option value="Elevador"></option>
        <option value="Escritório"></option>
        <option value="Estacionamento"></option>
        <option value="Fogão a lenha"></option>
        <option value="Garagem"></option>
        <option value="Guarda Roupas"></option>
        <option value="Hall de Entrada"></option>
        <option value="Lavabo"></option>
        <option value="Loja"></option>
        <option value="Mesanino"></option>
        <option value="Piscina"></option>
        <option value="Play Ground"></option>
        <option value="Primeiro Andar"></option>
        <option value="Quadra"></option>
        <option value="Quarto"></option>
        <option value="Quarto Suíte"></option>
        <option value="Sacada Suíte"></option>
        <option value="Sala"></option>
        <option value="Sala Comercial"></option>
        <option value="Salão de Festas"></option>
        <option value="Sauna"></option>
        <option value="Segundo Piso"></option>
        <option value="Sobreloja"></option>
        <option value="Terraço"></option>
        <option value="Terceiro Piso"></option>
        <option value="Vista Dormitório"></option>
        <option value="Vista Sala"></option>
    </datalist>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <style>
        .draggable.rotated {
            transform: rotate(45deg) !important;
        }
    </style>
    <script>
        var indice = 0;
        var carregarArquivos = null;
        $(document).ready(function () {
            if ($("#sort1").length) {
                $("#sort1").sortable({
                    helper: "clone",
                    opacity: 0.75,
                    cursor: "crosshair",
                    connectWith: ".list",
                    start: function (event, ui) {
                        ui.item.addClass("rotated");
                        $('.draggable').addClass('rotated');
                    },
                    stop: function (event, ui) {
                        ui.item.removeClass("rotated");
                    }
                });
                $("#sort1").disableSelection();
            }
            $('#btnIncluirFotosImovel').click(function () {
                $('#file').trigger('click');
            });
            $(document).on('click', '.ordenarFotosApp', function () {
                var ordem = '';
                var virgula = '';
                var cod_imov;
                $('.alterarFotoApp').each(function () {
                    cod_imov = $(this).attr('data-cod_imov');
                    var num_foto = $(this).attr('data-num_foto');
                    ordem += virgula + num_foto;
                    virgula = ',';
                });
                var link = '?acao=ordenar&codigos=' + ordem + '&cod_imov=' + cod_imov;
                window.location.href = link;
            });
            $(document).on('click', '.alterarFotoApp', function () {
                var num_foto = $(this).attr('data-num_foto');
                var cod_imov = $(this).attr('data-cod_imov');
                var descricao = $(this).attr('data-descricao');
                var exibe_internet = $(this).attr('data-exibe_internet');
                var capa = $(this).attr('data-capa');
                var dt_modif = $(this).attr('data-dt_modif');
                var exibe_internet_sim = 'checked';
                var exibe_internet_nao = 'checked';
                if (exibe_internet == 'S') {
                    exibe_internet_nao = '';
                } else {
                    exibe_internet_sim = '';
                }
                var capa_sim = 'checked';
                var capa_nao = 'checked';
                if (capa == 'S') {
                    capa_nao = '';
                } else {
                    capa_sim = '';
                }
                var html = '<form method="POST" enctype="multipart/form-data">';
                html += '<input type="hidden" name="acao" value="gravar">';
                html += '<input type="hidden" name="num_foto" value="' + num_foto + '">';
                html += '<input type="hidden" name="cod_imov" value="' + cod_imov + '">';
                html += '<input type="file" name="foto" id="campo_foto" class="d-none" accept=".jpg,.jpeg" onchange="abrirImagem(event)">';
                html += '<div class="row"><div class="col-12 position-relative">'
                html += '<img id="imagem_foto" class="click_campo_foto w-100 border rounded" src="https://www.casanovalocadora.com.br/Imovel/imagem/' + num_foto + '/1024/768/100/' + dt_modif + '"><br>';
                html += '<input required list="descricao" name="descricao" class="form-control" name="descricao" value="' + descricao + '" required>';
                html += '<span class="position-absolute bg-white border rounded text-center" top: 8px; left: 25px; padding: 2px 10px;"><strong>Internet</strong><br>'
                html += '<label><input required type="radio" name="exibe_internet" value="S" ' + exibe_internet_sim + '>&nbsp;&nbsp;Sim </label> | ';
                html += '<label><input required type="radio" name="exibe_internet" value="N" ' + exibe_internet_nao + '> Não</span>';
                html += '<span class="position-absolute bg-white border rounded text-center" style="top: 8px; right: 25px; padding: 2px 10px;"><strong>Capa</strong><br>'
                html += '<label><input required type="radio" name="capa" value="S" ' + capa_sim + '>&nbsp;&nbsp;Sim </label> | ';
                html += '<label><input required type="radio" name="capa" value="N" ' + capa_nao + '>&nbsp;&nbsp;Não</label></span>';
                html += '</div></div><button class="d-none" type="submit" id="enviarfotoAlterada"></button></form>';
                var botoes = '<button type="button" id="btnGravarFoto" class="btn btn-outline-success"><span class="material-icons">save</span> Gravar</button> ';
                if (num_foto > 0) {
                    botoes += '<button type="button" class="btn btn-outline-danger confirmarLink" data-titulo="Excluir foto" data-texto="Tem certeza que deseja excluir esta foto?" data-botao="Excluir" data-link="?acao=excluir&num_foto=' + num_foto + '&cod_imov=' + cod_imov + '"><span class="material-icons">delete</span> Excluir</button> ';
                }
                botoes += '<button type="button" class="btn btn-outline-secondary" data-dismiss="modal"><span class="material-icons">close</span> Fechar</button> ';
                mensagemModal('Editar foto', html, botoes);
            });
        });
    </script>
    <!-- inicio ta tela modal -->
    <div class="modal fade d-none" id="modal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false"
        style="z-index: 100005;">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header paddingTopBottom8px">
                    <h5 class="modal-title" id="modalTitulo">Editar foto</h5>
                    <button type="button" class="close d-block" data-dismiss="modal" id="modal-fechar">
                        <span>×</span>
                    </button>
                </div>
                <div class="modal-body paddingTopBottom8px" id="modalTexto">
                    <form method="POST" enctype="multipart/form-data">
                        <input type="hidden" name="acao" value="gravar">
                        <input type="hidden" name="num_foto" value="1560879">
                        <input type="hidden" name="cod_imov" value="99766">
                        <input type="file" name="foto" id="campo_foto" class="d-none" accept=".jpg,.jpeg" onchange="abrirImagem(event)">
                        <div class="row">
                            <div class="col-12 position-relative">
                                <img id="imagem_foto" class="click_campo_foto w-100 rounded border" src="https://www.casanovalocadora.com.br/Imovel/imagem/1560879/1024/768/100/undefined">
                                <br>
                                <input required="" list="descricao" name="descricao" class="form-control" value="Dormitório suite">
                                <span class="position-absolute bg-white border rounded text-center" style="top: 8px; left: 25px; padding: 2px 10px;">
                                    <strong>Internet</strong>
                                    <br>
                                    <label>
                                        <input required="" type="radio" name="exibe_internet" value="S" checked="">
                                        &nbsp;&nbsp;Sim
                                    </label> |
                                    <label>
                                        <input required="" type="radio" name="exibe_internet" value="N"> 
                                        Não
                                    </label>
                                </span>
                                <span class="position-absolute bg-white border rounded text-center" style="top: 8px; right: 25px; padding: 2px 10px;">
                                    <strong>Capa</strong>
                                    <br>
                                    <label>
                                        <input required="" type="radio" name="capa" value="S">&nbsp;&nbsp;Sim
                                    </label> |
                                    <label>
                                        <input required="" type="radio" name="capa" value="N" checked="">&nbsp;&nbsp;Não
                                    </label>
                                </span>
                            </div>
                        </div><button type="submit" id="enviarfotoAlterada" class="d-none"></button>
                    </form>
                </div>
                <div class="modal-footer text-right paddingTopBottom8px d-block" id="modalBotoes">
                    <button type="button" id="btnGravarFoto" class="btn btn-outline-success">
                        <span class="material-icons">save</i>
                        Gravar
                    </button>
                    <button type="button" class="btn btn-outline-danger confirmarLink" data-titulo="Excluir foto"
                        data-texto="Tem certeza que deseja excluir esta foto?" data-botao="Excluir"
                        data-link="?acao=excluir&amp;num_foto=1560879&amp;cod_imov=99766">
                        <span class="material-icons">delete</i>
                        Excluir
                    </button>
                    <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">
                        <span class="material-icons">close</i>
                        Fechar
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- inicio ta tela modal grande -->
    <div style="z-index: 99999;" class="modal fade" id="modalGrande" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header paddingTopBottom8px"></div>
                <div class="modal-body paddingTopBottom8px" id="modalTextoGrande"></div>
                <div class="modal-footer text-right paddingTopBottom8px" id="modalBotoesGrande"></div>
            </div>
        </div>
    </div>
    <!-- inicio ta tela modal agenda-->
    <div class="modal fade" id="modalAgenda" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" style="z-index: 99995">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header paddingTopBottom8px" style="padding: 8px 0">
                    <div class="col-2">
                        <button class="btn btn-success navegarAgenda agendaNormal" data-direcao="-1">
                            <span class="material-icons">keyboard_arrow_left</i>
                        </button>
                    </div>
                    <div class="col-8 text-center">
                        <h5 class="modal-title" id="agendaCabecalho"></h5>
                    </div>
                    <div class="col-2 text-right">
                        <button class="btn btn-success navegarAgenda agendaNormal" data-direcao="1">
                            <span class="material-icons">keyboard_arrow_right</i>
                        </button>
                    </div>
                </div>
                <div class="modal-body paddingTopBottom8px">
                    <div class="agendaNormal" style="height: 320px; overflow-y: auto" id="agendaConteudo"></div>
                    <div class="d-none w-75 float-start" class="agendaResposta">
                        <textarea class="form-control" id="txtAgendaResposta" style="height: 320px;"></textarea>
                    </div>
                    <div class="agendaResposta" class="d-none w-25 float-end"
                        style="height: 320px; overflow-y: scroll; padding: 0 0 0 10px">
                        <label><input type="checkbox" class="usuariosAgenda" value="ANDRE"> Andre Luiz</label><br>
                        <label><input type="checkbox" class="usuariosAgenda" value="RENATO">Renato Felix</label><br>
                    </div>
                </div>
                <div class="modal-footer paddingTopBottom8px text-right agendaNormal">
                    <button type="button" class="btn btn-outline-danger btnConcluirAgendaTodos" data-dismiss="modal">
                        <span class="material-icons">done_all</span>
                        Concluir Todos
                    </button>
                    <button type="button" class="btn btn-outline-success btnConcluirAgenda">
                        <span class="material-icons">done</span>
                        Concluir
                    </button>
                    <button type="button" class="btn btn-outline-primary btnResponserAgenda" data-novo="0">
                        <span class="material-icons">reply</span>
                        Responder
                    </button>
                    <button type="button" class="btn btn-outline-primary btnResponserAgenda" data-novo="1">
                        <span class="material-icons">add</span>
                        Adicionar
                    </button>
                    <button type="button" class="btn btn-outline-danger" data-dismiss="modal">
                        <span class="material-icons">close</span>
                        Fechar
                    </button>
                </div>
                <div class="modal-footer paddingTopBottom8px agendaResposta d-none">
                    <button type="button" class="btn btn-outline-danger btnConcluirAgendaTodos" data-dismiss="modal">
                        <span class="material-icons">done_all</span>
                        Concluir Todos
                    </button>
                    <label>
                        <input type="checkbox" id="chkResponderConcluido" checked="">&nbsp;Marcar como concluido
                    </label>&nbsp;&nbsp;&nbsp;
                    <button type="button" class="btn btn-outline-success btnResponserAgendaFinal">
                        <span class="material-icons">done_all</span>
                        Concluir
                    </button>
                    <button type="button" class="btn btn-outline-danger  btnCancelarResponderAgenda">
                        <span class="material-icons">close</span>
                        Cancelar
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>